package com.osprey.screen;

import java.util.List;
import java.util.Stack;

import com.osprey.screen.screens.IStockScreen;
import com.osprey.securitymaster.ExtendedPricedSecurity;
import com.osprey.securitymaster.HistoricalSecurity;

public class StockScreenPlan {

	private Stack<IStockScreen> screens;
	private final ExtendedPricedSecurity security;
	private final List<HistoricalSecurity> history;

	public boolean passed;

	public StockScreenPlan(ExtendedPricedSecurity security, List<HistoricalSecurity> history) {
		this.security = security;
		this.history = history;
	}

	public StockScreenPlan add(IStockScreen screen) {
		screens.add(screen);
		return this;
	}

	public StockScreenPlan removePrevious() {

		return this;
	}

	public StockScreenPlan execute() {
		
		do{
			screens.peek().doScreen(security, history);
		}while(screens.pop().passed());

		return this;
	}

	public boolean passed() {
		return passed;
	}
}
